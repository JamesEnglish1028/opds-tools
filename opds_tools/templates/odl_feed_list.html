{% extends "base.html" %}
{% block content %}
<div class="container-fluid py-4 px-3">
  <div class="container my-4">
    <h3 class="text-primary text-uppercase mt-4 mb-4"><i class="bi bi-database me-2"></i>Stored ODL Feeds</h3>
    <hr class="mt-0 mb-2">

  <h4 class="mb-3 text-primary"><i class="bi bi-journals"></i> ODL Feeds</h4>

  {% if feeds %}
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>Name</th>
            <th>URL</th>
            <th>Publications</th>
            <th>Updated</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for feed in feeds %}
            <tr>
              <td>{{ feed.name }}</td>
              <td class="text-truncate" style="max-width: 300px">{{ feed.url }}</td>
              <td>{{ feed_stats[feed.id] }}</td>
              <td>{{ feed.updated_at.strftime('%Y-%m-%d %H:%M') }}</td>
              <td>
                <a href="{{ url_for('odl_crawler.view_odl_publications', feed_id=feed.id) }}" class="btn btn-primary">
                  <i class="bi bi-eye"></i> View
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-muted">No ODL feeds found.</p>
  {% endif %}
</div>
{% endblock %}
