<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}OPDS Tools{% endblock %}</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Your custom CSS -->
  <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet"/>
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- Add Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Optional: jQuery (only needed for older Bootstrap versions, Bootstrap 5 works without it) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light">
  {% import 'macros.html' as macros %}
  <!--{% from 'macros.html' import render_facet_collections %}
  {% from "macros.html" import render_schema_type_badge %}-->
  {% import 'catalog_links_macro.html' as catalog_macros %}


<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
  <div class="container-fluid">

    <!-- App Name -->
    <a class="navbar-brand fw-bold" href="/">
      <i class="bi bi-tools me-2"></i> OPDS Tools
    </a>

    <!-- Collapse Button for Mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Links -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarNavAltMarkup">
      <ul class="navbar-nav gap-2">

        <!-- OPDS Utilities Dropdown -->
        <li class="nav-item dropdown">
          <a class="btn btn-outline-light dropdown-toggle" href="#" id="opdsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-tools me-1"></i> OPDS Utilities
          </a>
          <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="opdsDropdown">
            <li>
              <a class="dropdown-item" href="{{ url_for('main.index') }}">
                <i class="bi bi-eye me-1"></i> View OPDS Catalogs
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('crawler.catalog_crawler') }}">
                <i class="bi bi-gear me-1"></i> Catalog Crawler (Ingest)
              </a>
            </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('validate.validate_feed_view') }}">
                    <i class="bi bi-shield-check me-1"></i> Validate OPDS Feed for Palace
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('analyze.analyze_feed_view') }}">
                    <i class="bi bi-bar-chart me-1"></i> Analyze Feed Format & DRM
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('inventory.inventory_report_view') }}">
                    <i class="bi bi-file-earmark-spreadsheet me-1"></i> Generate Inventory Report
                  </a>
                </li>
          </ul>
        </li>

        <!-- ODL Utilities Dropdown -->
        <li class="nav-item dropdown">
          <a class="btn btn-outline-light dropdown-toggle" href="#" id="odlDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-diagram-3 me-1"></i> ODL Utilities
          </a>
          <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="odlDropdown">
            <li>
              <a class="dropdown-item" href="{{ url_for('odl_utilities.odl_utilities') }}">
                <i class="bi bi-eye me-1"></i> View ODL
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('odl_crawler.crawl_odl_feed') }}">
                <i class="bi bi-gear me-1"></i> Crawl ODL (Ingest)
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('odl_crawler.list_odl_feeds') }}">
                <i class="bi bi-database me-1"></i> Stored ODL Feeds
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('odl_analyze.analyze_odl_feed_view') }}">
                <i class="bi bi-bar-chart me-1"></i> Analyze ODL Feed Format & DRM
              </a>
            </li>
          </ul>
        </li>

        <!-- ONIX & EPUB UTILS -->
        <li class="nav-item dropdown">
          <a class="btn btn-outline-light dropdown-toggle" href="#" id="onixDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-cloud-arrow-up me-2"></i> ONIX & EPUB Utilities
          </a>
          <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="onixDropdown">
            <li>
              <a class="dropdown-item" href="{{ url_for('onix.upload_onix') }}"> <i class="bi bi-arrow-left-right me-2"></i>ONIX to OPDS Web Publication Document</a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('onix.upload_epub') }}"> <i class="bi bi-upload me-2" ></i>Upload EPUBs to View</a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('main.epub_selector') }}"><i class="bi bi-eye me-2" ></i>View Stored EPUBs</a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('main.manage_epubs') }}"><i class="bi bi-folder-x me-2" ></i>Manage EPUBs</a>
            </li>
            <li>
              <a class="dropdown-item" href="http://localhost:3000"><i class="bi bi-book me-2" ></i>Thorium Reader</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container mt-4">

    {% block content %}

    
    
    {% endblock %}
  </div>

<!-- Bootstrap Bundle JS (includes both Bootstrap's JavaScript and Popper.js) 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->

  <!-- Optional: jQuery (for older Bootstrap versions, not necessary for Bootstrap 5) 
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->

  {% block scripts %}
  {% endblock %}

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('[data-progress]').forEach((el) => {
        const progress = parseFloat(el.getAttribute('data-progress'));
        if (!Number.isNaN(progress)) {
          el.style.width = `${progress}%`;
          el.setAttribute('aria-valuenow', `${progress}`);
        }

        const valueNow = el.getAttribute('data-valuenow');
        const valueMax = el.getAttribute('data-valuemax');
        if (valueNow && valueMax) {
          el.setAttribute('aria-valuetext', `${valueNow} of ${valueMax}`);
        }
      });
    });
  </script>

</body>
</html>
